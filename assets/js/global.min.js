if(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dropkickjs=t():e.dropkickjs=t()}(this,(function(){return function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,a){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),s=a(i(1)),l=a(i(2)),r=a(i(3)),d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),c=window.parent!==window.self,u=void 0,h=function(){function e(t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.sel=t;var a=void 0,n=void 0,o=window.Dropkick;for("string"==typeof this.sel&&"#"===this.sel[0]&&(this.sel=document.getElementById(t.substr(1))),a=0;a<o.uid;a++)if((n=o.cache[a])instanceof e&&n.data.select===this.sel)return s.default.extend(n.data.settings,i),n;if(!this.sel)throw"You must pass a select to DropKick";if(this.sel.length<1)throw"You must have options inside your <select>: "+t;if("SELECT"===this.sel.nodeName)return this.init(this.sel,i)}return o(e,[{key:"init",value:function(t,i){var a,n=window.Dropkick,o=e.build(t,"dk"+n.uid);if(this.data={},this.data.select=t,this.data.elem=o.elem,this.data.settings=s.default.extend({},l.default,i),this.disabled=t.disabled,this.form=t.form,this.length=t.length,this.multiple=t.multiple,this.options=o.options.slice(0),this.selectedIndex=t.selectedIndex,this.selectedOptions=o.selected.slice(0),this.value=t.value,this.data.cacheID=n.uid,n.cache[this.data.cacheID]=this,this.data.settings.initialize.call(this),n.uid+=1,this._changeListener||(t.addEventListener("change",this),this._changeListener=!0),!d||this.data.settings.mobile){if(t.parentNode.insertBefore(this.data.elem,t),t.setAttribute("data-dkCacheId",this.data.cacheID),this.data.elem.addEventListener("click",this),this.data.elem.addEventListener("keydown",this),this.data.elem.addEventListener("keypress",this),this.form&&this.form.addEventListener("reset",this),!this.multiple)for(a=0;a<this.options.length;a++)this.options[a].addEventListener("mouseover",this);u||(document.addEventListener("click",e.onDocClick),c&&parent.document.addEventListener("click",e.onDocClick),u=!0)}return this}},{key:"add",value:function(e,t){var i,a,n;"string"==typeof e&&(i=e,(e=document.createElement("option")).text=i),"OPTION"===e.nodeName&&(a=s.default.create("li",{class:"dk-option","data-value":e.value,text:e.text,innerHTML:e.innerHTML,role:"option","aria-selected":"false",id:"dk"+this.data.cacheID+"-"+(e.id||e.value.replace(" ","-"))}),s.default.addClass(a,e.className),this.length+=1,e.disabled&&(s.default.addClass(a,"dk-option-disabled"),a.setAttribute("aria-disabled","true")),e.hidden&&(s.default.addClass(a,"dk-option-hidden"),a.setAttribute("aria-hidden","true")),this.data.select.add(e,t),"number"==typeof t&&(t=this.item(t)),(n=this.options.indexOf(t))>-1?(t.parentNode.insertBefore(a,t),this.options.splice(n,0,a)):(this.data.elem.lastChild.appendChild(a),this.options.push(a)),a.addEventListener("mouseover",this),e.selected&&this.select(n))}},{key:"item",value:function(e){return e=e<0?this.options.length+e:e,this.options[e]||null}},{key:"remove",value:function(e){var t=this.item(e);t.parentNode.removeChild(t),this.options.splice(e,1),this.data.select.remove(e),this.select(this.data.select.selectedIndex),this.length-=1}},{key:"close",value:function(){var e,t=this.data.elem;if(!this.isOpen||this.multiple)return!1;for(e=0;e<this.options.length;e++)s.default.removeClass(this.options[e],"dk-option-highlight");t.lastChild.setAttribute("aria-expanded","false"),s.default.removeClass(t.lastChild,"dk-select-options-highlight"),s.default.removeClass(t,"dk-select-open-(up|down)"),this.isOpen=!1,this.data.settings.close.call(this)}},{key:"open",value:function(){var e,t,i,a,n=this.data.elem,o=n.lastChild,l=void 0!==window.pageXOffset,r="CSS1Compat"===(document.compatMode||""),d=l?window.pageYOffset:r?document.documentElement.scrollTop:document.body.scrollTop;if(i=s.default.offset(n).top-d,a=window.innerHeight-(i+n.offsetHeight),this.isOpen||this.multiple)return!1;o.style.display="block",e=o.offsetHeight,o.style.display="",t=i>e&&!(a>e)?"-up":"-down",this.isOpen=!0,s.default.addClass(n,"dk-select-open"+t),o.setAttribute("aria-expanded","true"),this._scrollTo(this.options.length-1),this._scrollTo(this.selectedIndex),this.data.settings.open.call(this)}},{key:"disable",value:function(e,t){var i="dk-option-disabled";0!==arguments.length&&"boolean"!=typeof e||(t=void 0===e,e=this.data.elem,i="dk-select-disabled",this.disabled=t),void 0===t&&(t=!0),"number"==typeof e&&(e=this.item(e)),t?(e.setAttribute("aria-disabled",!0),s.default.addClass(e,i)):(e.setAttribute("aria-disabled",!1),s.default.removeClass(e,i))}},{key:"hide",value:function(e,t){void 0===t&&(t=!0),e=this.item(e),t?(e.setAttribute("aria-hidden",!0),s.default.addClass(e,"dk-option-hidden")):(e.setAttribute("aria-hidden",!1),s.default.removeClass(e,"dk-option-hidden"))}},{key:"select",value:function(e,t){var i,a,n,o,l=this.data.select;if("number"==typeof e&&(e=this.item(e)),"string"==typeof e)for(i=0;i<this.length;i++)this.options[i].getAttribute("data-value")===e&&(e=this.options[i]);return!(!e||"string"==typeof e||!t&&s.default.hasClass(e,"dk-option-disabled"))&&(s.default.hasClass(e,"dk-option")?(a=this.options.indexOf(e),n=l.options[a],this.multiple?(s.default.toggleClass(e,"dk-option-selected"),n.selected=!n.selected,s.default.hasClass(e,"dk-option-selected")?(e.setAttribute("aria-selected","true"),this.selectedOptions.push(e)):(e.setAttribute("aria-selected","false"),a=this.selectedOptions.indexOf(e),this.selectedOptions.splice(a,1))):(o=this.data.elem.firstChild,this.selectedOptions.length&&(s.default.removeClass(this.selectedOptions[0],"dk-option-selected"),this.selectedOptions[0].setAttribute("aria-selected","false")),s.default.addClass(e,"dk-option-selected"),e.setAttribute("aria-selected","true"),o.setAttribute("aria-activedescendant",e.id),o.className="dk-selected "+n.className,o.innerHTML=n.innerHTML,this.selectedOptions[0]=e,n.selected=!0),this.selectedIndex=l.selectedIndex,this.value=l.value,t||this.data.select.dispatchEvent(new r.default("change",{bubbles:this.data.settings.bubble})),e):void 0)}},{key:"selectOne",value:function(e,t){return this.reset(!0),this._scrollTo(e),this.select(e,t)}},{key:"search",value:function(e,t){var i,a,n,o,s,l,r,d,c=this.data.select.options,u=[];if(!e)return this.options;for(t="fuzzy"===(t=t?t.toLowerCase():"strict")?2:"partial"===t?1:0,d=new RegExp((t?"":"^")+e,"i"),i=0;i<c.length;i++)if(n=c[i].text.toLowerCase(),2==t){for(a=e.toLowerCase().split(""),o=s=l=r=0;s<n.length;)n[s]===a[o]?(l+=1+l,o++):l=0,r+=l,s++;o===a.length&&u.push({e:this.options[i],s:r,i:i})}else d.test(n)&&u.push(this.options[i]);return 2===t&&(u=u.sort((function(e,t){return t.s-e.s||e.i-t.i})).reduce((function(e,t){return e[e.length]=t.e,e}),[])),u}},{key:"focus",value:function(){this.disabled||(this.multiple?this.data.elem:this.data.elem.children[0]).focus()}},{key:"reset",value:function(e){var t,i=this.data.select;for(this.selectedOptions.length=0,t=0;t<i.options.length;t++)i.options[t].selected=!1,s.default.removeClass(this.options[t],"dk-option-selected"),this.options[t].setAttribute("aria-selected","false"),!e&&i.options[t].defaultSelected&&this.select(t,!0);this.selectedOptions.length||this.multiple||this.select(0,!0)}},{key:"refresh",value:function(){Object.keys(this).length>0&&(!d||this.data.settings.mobile)&&this.dispose().init(this.data.select,this.data.settings)}},{key:"dispose",value:function(){var e=window.Dropkick;return Object.keys(this).length>0&&(!d||this.data.settings.mobile)&&(delete e.cache[this.data.cacheID],this.data.elem.parentNode.removeChild(this.data.elem),this.data.select.removeAttribute("data-dkCacheId")),this}},{key:"handleEvent",value:function(e){if(!this.disabled)switch(e.type){case"click":this._delegate(e);break;case"keydown":this._keyHandler(e);break;case"keypress":this._searchOptions(e);break;case"mouseover":this._highlight(e);break;case"reset":this.reset();break;case"change":this.data.settings.change.call(this)}}},{key:"_delegate",value:function(e){var t,i,a,n,o=e.target;if(s.default.hasClass(o,"dk-option-disabled"))return!1;if(this.multiple){if(s.default.hasClass(o,"dk-option"))if("Range"===(t=window.getSelection()).type&&t.collapseToStart(),e.shiftKey)if(a=this.options.indexOf(this.selectedOptions[0]),n=this.options.indexOf(this.selectedOptions[this.selectedOptions.length-1]),(i=this.options.indexOf(o))>a&&i<n&&(i=a),i>n&&n>a&&(n=a),this.reset(!0),n>i)for(;i<n+1;)this.select(i++);else for(;i>n-1;)this.select(i--);else e.ctrlKey||e.metaKey||this.reset(!0),this.select(o)}else this[this.isOpen?"close":"open"](),s.default.hasClass(o,"dk-option")&&this.select(o)}},{key:"_highlight",value:function(e){var t,i=e.target;if(!this.multiple){for(t=0;t<this.options.length;t++)s.default.removeClass(this.options[t],"dk-option-highlight");s.default.addClass(this.data.elem.lastChild,"dk-select-options-highlight"),s.default.addClass(i,"dk-option-highlight")}}},{key:"_keyHandler",value:function(e){var t,i,a=this.selectedOptions,n=this.options,o=1,l=9,r=13,d=27,c=32,u=38,h=40;switch(e.keyCode){case u:o=-1;case h:if(e.preventDefault(),t=a[a.length-1],s.default.hasClass(this.data.elem.lastChild,"dk-select-options-highlight"))for(s.default.removeClass(this.data.elem.lastChild,"dk-select-options-highlight"),i=0;i<n.length;i++)s.default.hasClass(n[i],"dk-option-highlight")&&(s.default.removeClass(n[i],"dk-option-highlight"),t=n[i]);(o=n.indexOf(t)+o)>n.length-1?o=n.length-1:o<0&&(o=0),this.data.select.options[o].disabled||(this.reset(!0),this.select(o),this._scrollTo(o));break;case c:if(!this.isOpen){e.preventDefault(),this.open();break}case l:case r:for(o=0;o<n.length;o++)s.default.hasClass(n[o],"dk-option-highlight")&&this.select(o);case d:this.isOpen&&(e.preventDefault(),this.close())}}},{key:"_searchOptions",value:function(e){var t,i=this,a=String.fromCharCode(e.keyCode||e.which);void 0===this.data.searchString&&(this.data.searchString=""),i.data.searchTimeout&&clearTimeout(i.data.searchTimeout),i.data.searchTimeout=setTimeout((function(){i.data.searchString=""}),1e3),this.data.searchString+=a,(t=this.search(this.data.searchString,this.data.settings.search)).length&&(s.default.hasClass(t[0],"dk-option-disabled")||this.selectOne(t[0]))}},{key:"_scrollTo",value:function(e){var t,i,a=this.data.elem.lastChild;if(-1===e||"number"!=typeof e&&!e||!this.isOpen&&!this.multiple)return!1;"number"==typeof e&&(e=this.item(e)),(i=(t=s.default.position(e,a).top)-a.scrollTop)+e.offsetHeight>a.offsetHeight?(t+=e.offsetHeight,a.scrollTop=t-a.offsetHeight):i<0&&(a.scrollTop=t)}}]),e}();window.Dropkick=h,window.Dropkick.cache={},window.Dropkick.uid=0,h.build=function(e,t){var i,a,n,o=[],l={elem:null,options:[],selected:[]};for(l.elem=s.default.create("div",{class:"dk-select"+(e.multiple?"-multi":"")}),a=s.default.create("ul",{class:"dk-select-options",id:t+"-listbox",role:"listbox"}),e.disabled&&(s.default.addClass(l.elem,"dk-select-disabled"),l.elem.setAttribute("aria-disabled",!0)),l.elem.id=t+(e.id?"-"+e.id:""),s.default.addClass(l.elem,e.className),e.multiple?(l.elem.setAttribute("tabindex",e.getAttribute("tabindex")||"0"),a.setAttribute("aria-multiselectable","true")):(i=e.options[e.selectedIndex],l.elem.appendChild(s.default.create("div",{class:"dk-selected "+(i?i.className:""),tabindex:e.tabindex||0,innerHTML:i?i.text:"&nbsp;",id:t+"-combobox","aria-live":"assertive","aria-owns":a.id,role:"combobox"})),a.setAttribute("aria-expanded","false")),n=e.children.length;n--;o.unshift(e.children[n]));return o.forEach((function e(i){var a,n,o,r,d=[];switch(i.nodeName){case"OPTION":a=s.default.create("li",{class:"dk-option ","data-value":i.value,text:i.text,innerHTML:i.innerHTML,role:"option","aria-selected":"false",id:t+"-"+(i.id||i.value.replace(" ","-"))}),s.default.addClass(a,i.className),i.disabled&&(s.default.addClass(a,"dk-option-disabled"),a.setAttribute("aria-disabled","true")),i.hidden&&(s.default.addClass(a,"dk-option-hidden"),a.setAttribute("aria-hidden","true")),i.selected&&(s.default.addClass(a,"dk-option-selected"),a.setAttribute("aria-selected","true"),l.selected.push(a)),l.options.push(this.appendChild(a));break;case"OPTGROUP":for(n=s.default.create("li",{class:"dk-optgroup"}),i.label&&n.appendChild(s.default.create("div",{class:"dk-optgroup-label",innerHTML:i.label})),o=s.default.create("ul",{class:"dk-optgroup-options"}),r=i.children.length;r--;d.unshift(i.children[r]));i.disabled&&(n.classList.add("dk-optgroup-disabled"),d.forEach((function(e){e.disabled=i.disabled}))),d.forEach(e,o),this.appendChild(n).appendChild(o)}}),l.elem.appendChild(a)),l},h.onDocClick=function(e){var t,i,a=window.Dropkick;if(1!==e.target.nodeType)return!1;for(i in null!==(t=e.target.getAttribute("data-dkcacheid"))&&a.cache[t].focus(),a.cache)s.default.closest(e.target,a.cache[i].data.elem)||i===t||a.cache[i].disabled||a.cache[i].close()},void 0!==window.jQuery&&(window.jQuery.fn.dropkick=function(){var e=Array.prototype.slice.call(arguments);return jQuery(this).each((function(){e[0]&&"object"!==n(e[0])?"string"==typeof e[0]&&h.prototype[e[0]].apply(new h(this),e.slice(1)):new h(this,e[0]||{})}))}),t.default=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=-1!==navigator.appVersion.indexOf("MSIE"),n={hasClass:function(e,t){var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");return e&&i.test(e.className)},addClass:function(e,t){e&&!this.hasClass(e,t)&&(e.className+=" "+t)},removeClass:function(e,t){var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e&&(e.className=e.className.replace(i," "))},toggleClass:function(e,t){this[(this.hasClass(e,t)?"remove":"add")+"Class"](e,t)},extend:function(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){if(t)for(var i in t)e[i]=t[i]})),e},offset:function(e){var t=e.getBoundingClientRect()||{top:0,left:0},i=document.documentElement,n=a?i.scrollTop:window.pageYOffset,o=a?i.scrollLeft:window.pageXOffset;return{top:t.top+n-i.clientTop,left:t.left+o-i.clientLeft}},position:function(e,t){for(var i={top:0,left:0};e&&e!==t;)i.top+=e.offsetTop,i.left+=e.offsetLeft,e=e.parentNode;return i},closest:function(e,t){for(;e;){if(e===t)return e;e=e.parentNode}return!1},create:function(e,t){var i=void 0,a=document.createElement(e);for(i in t||(t={}),t)t.hasOwnProperty(i)&&("innerHTML"===i?a.innerHTML=t[i]:a.setAttribute(i,t[i]));return a},deferred:function(e){return function(){var t=this,i=arguments;window.setTimeout((function(){e.apply(t,i)}),1)}}};t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={initialize:function(){},mobile:!0,change:function(){},open:function(){},close:function(){},search:"strict",bubble:!0}},function(e,t,i){(function(t){var i=t.CustomEvent;e.exports=function(){try{var e=new i("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?i:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var i=document.createEvent("CustomEvent");return t?i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):i.initCustomEvent(e,!1,!1,void 0),i}:function(e,t){var i=document.createEventObject();return i.type=e,t?(i.bubbles=Boolean(t.bubbles),i.cancelable=Boolean(t.cancelable),i.detail=t.detail):(i.bubbles=!1,i.cancelable=!1,i.detail=void 0),i}}).call(t,i(4))},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i}])})),document.body.classList.contains("page-template-template_whiskey-builder"))var scroll=new LocomotiveScroll({el:document.querySelector("[data-scroll-container]"),smooth:!1,getDirection:!0,mobile:{smooth:!1},tablet:{smooth:!1}});else scroll=new LocomotiveScroll({el:document.querySelector("[data-scroll-container]"),smooth:!1,getDirection:!0});function fnAgeGate(){var e=$("article#age-gate"),t=($("body").attr("data-age-verified"),"AGE_VERIFIED"),i=$(".agree-button span",e);function a(){localStorage.setItem(t,"true"),$("body").attr("data-age-verified","true"),$("body").attr("data-age-verified"),TweenLite.to(e,2,{delay:0,opacity:0,ease:Power4.easeOut},0)}localStorage.getItem(t)?a():($("body").attr("data-age-verified","false"),$("body").attr("data-age-verified")),i.on("click",a)}function fnBasket(e,t){t=$(t);var i=$(".quantity_field",t),a=$(".-verify-length",t),n=$(".-verify-email",t),o=(n=$(".-verify-phone",t),$("select#state",t)),s=$(".submit_btn a",t),l=$(".accordion",t);scroll.destroy();var r=$('.modal[data-modal="basket_invalid-email"]'),d=$('.modal[data-modal="basket_invalid-phone"]'),c=$('.modal[data-modal="basket_invalid-state"]'),u=$('.modal[data-modal="basket_remove-whiskey"]');if($("i.main_exit, .modal_bg").on("click",(function(){r.removeClass("-visible"),c.removeClass("-visible"),u.removeClass("-visible"),d.removeClass("-visible")})),i.length>0){var h=$("#promotional-code").length;i.each((function(){var e=$(this),t=$("input.quantity_input",e),i=t.val(),a=t.val(),n="experience"===e.data("product-type")?209:139;h&&(n-=10),$(".quantity_mod",e).on("click",(function(){i=t.val(),a=$(this).hasClass("-increase")?parseFloat(i)+1:i>1?parseFloat(i)-1:1,t.val(a),$(this).parents(".table_row").find(".col_price .amount").html(n*a),v();var e=t.data("cart-item-uniqid"),o=$(".ajax-url").val(),s={action:"update_cart_item_quantity",uniqId:e,quantity:a};jQuery.post(o,s,(function(e){console.log(e)}))}))}))}var m=$("#selected-state");m.length&&o.val(m.val()),$(document).on("change","#email, #state, #phoneNumber",(function(){var e,t;e=$(".ajax-url").val(),t={action:"update_cart_details",email:$("#email").val(),phoneNumber:$("#phoneNumber").val(),state:o.val()},jQuery.post(e,t,(function(e){console.log(e)}))})),$(document).on("change",".additional_gift input, .additional_gift textarea",(function(e){!function(e){var t=$(".ajax-url").val();const i=e.target.name.replace("recipientName_","").replace("gift-message_",""),a="INPUT"===e.target.tagName?{recipientName:e.target.value}:{giftMessage:e.target.value};var n={action:"update_cart_item_details",cartItemId:i,...a};jQuery.post(t,n,(function(e){console.log(e)}))}(e)})),$(document).on("change","#state",(function(){v()})),a.on("input",(function(){$(this).find(".verify_field").val().length>($(this).data("min-verify")?$(this).data("min-verify"):0)?$(this).addClass("-verified"):$(this).removeClass("-verified")})),o.dropkick({mobile:!0}),n.on("input",(function(){f($(this).find('input[type="email"]').val())&&$(this).find(".verify_field").val().length>4?($(this).addClass("-verified"),s.removeClass("-disable")):($(this).removeClass("-verified"),s.addClass("-disable"))}));function f(e){return/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(e)}function p(e){return/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/.test(e)}function v(){let e=$(".quantity_field"),t=$("#promotional-code").length,i=$("#gift-up-discount-amount"),a=$("#state").val(),n=0,o=0,s=0,l=0,r=!1;e.each((function(){var e="experience"===$(this).data("product-type"),i=e?209:139;t&&(i-=10);let a=$(this),o=$("input.quantity_input",a).val();s+=parseInt(o),n+=i*parseInt(o),!r&&e&&(r=!0)})),$("#total_base_price").html(n),"CA"===a?(l=.1025*n,$("#tax").html(l.toFixed(2)),$("#taxLabel").html("Tax (10.25%):")):(l=0,$("#tax").html(l.toFixed(2)),$("#taxLabel").html("Tax (0.00%):")),o=r?30:1===s?"PR"===a?25:"CAN"===a?40:20:2===s?"PR"===a?30:"CAN"===a?50:25:"PR"===a?35:"CAN"===a?60:30,$("#shipping_cost").html(o);let d=n+l+o;i.length&&(d-=parseFloat(i.val()),d<0&&(d=0)),$("#grand_total").html(d.toFixed(2))}var g;$("#phoneNumber").on("keydown",(e=>{console.log(e.keyCode||e.which);var t=e.keyCode||e.which;if(![49,50,51,52,53,54,55,56,57,48,8,13,189,16,56,16,57,32,190,96,97,98,99,100,101,102,103,104,105].some((e=>e==t)))return!1})),$("#phoneNumber").on("input",(e=>{var t,i;p(e.target.value)&&(e.target.value=(t=e.target.value,i=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,t.replace(i,"($1) $2-$3")),console.log("checked as valid"))})),$(document).on("click",".remove_link",(function(){var e=$(this),t=e.data("cart-item-uniqid"),i=$(".ajax-url").val();u.addClass("-visible"),$("a.btn-exit",u).on("click",(function(e){e.preventDefault(),u.removeClass("-visible")})),$("a.btn-remove-whiskey",u).on("click",(function(){var a=e.parents(".table_row");a.next(".additional_gift").remove(),a.remove(),v();var n={action:"remove_item_from_cart_action",uniqId:t};total=parseFloat(a.find(".amount").text().trim().match(/\d+/)[0])/parseInt(a.find(".quantity_input").val()),variant=[],a.find(".info_options .option").each((function(){variant.push($(this).find(".option_label").text().trim()+": "+$(this).find(".option_value").text().trim())})),variant=variant.join("          "),dataLayer.push({event:"removeFromCart",ecommerce:{currencyCode:"USD",add:{products:[{name:"Make My Whiskey",id:a.attr("data-product_id"),price:total,brand:"Designer Dram",category:"Custom Whiskey",variant:variant,quantity:parseInt(a.find(".quantity_input").val())}]}}}),jQuery.post(i,n,(function(e){var t=JSON.parse(e).cart_items_count;$(".control .basket .count").html(t),0==$("article.table_row").length&&($(".additional").remove(),$(".submit").remove(),$("#basket-tax-container").remove(),$(".table .table_inner").html('<h2 class="no-cart-item">Your cart is empty!</h2>'))})),u.removeClass("-visible")}))})),$(document).on("click",".edit_link",(function(){$(this).data("cart-key")})),$(document).on("click",".submit_btn a",(function(e){e.preventDefault();$(this);var t=$("#email").val(),i=$("#phoneNumber").val(),a=o.val(),n=$(".ajax-url").val();if(""==t)return r.addClass("-visible"),!1;if(!f(t))return r.addClass("-visible"),!1;if(""==i)return d.addClass("-visible"),!1;if(!p(i))return d.addClass("-visible"),!1;if("--"==a)return c.addClass("-visible"),!1;if(f(t)){const e=new FormData;e.append("action","create_checkout_session_action"),e.append("password",password);const t=new URLSearchParams(e);s.removeClass("-disable");let i=null;i="staging.designerdram.com"===location.hostname?Stripe("pk_test_51I1BamFTtfrvY7u6aycXTsoV2IPg0QJtw1dYmk5laqHVJns8JA2YcSDo0Z0SaOVkdIYXRezgH7zyU8ATUG19ONvB003tcObhOB"):Stripe("pk_live_51I1BamFTtfrvY7u6sO3mF23Qv7TXzE7TRsuMW9EMRWMIyy9qvzFgcZrvz3i0A6WFRigBinBFLbbrvkoMJGyL2RRf00zs46G0F1"),fetch(n,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},body:t}).then((function(e){return e.json()})).then((function(e){return"redirectUrl"in e?(window.location.href=e.redirectUrl,!1):i.redirectToCheckout({sessionId:e.id})})).then((function(e){e.error&&(document.getElementById("error-message").textContent=e.error.message)}))}})),$(".accord_label",l).on("click",(function(){(g=$(this).parent(".accordion")).hasClass("-is-open")?(g.removeClass("-is-open"),$(".accord_inner",g).slideUp("slow").animate({opacity:0},{queue:!1,duration:"slow"})):(g.addClass("-is-open"),$(".accord_inner",g).css("opacity",0).slideDown("slow").animate({opacity:1},{queue:!1,duration:"slow"})),setTimeout((()=>{scroll.update()}),500)}))}function fnBlogMobileMenu(){$list=$("nav.blog-categories ul"),$active=$list.children(".active"),$active.on("click",(e=>{window.matchMedia("max-width: 768px")&&$list.toggleClass("expanded")}))}function fnBorderedTestimonials(e,t){t=$(t);$(".items",t).flickity({cellAlign:"center",wrapAround:!1,fade:!0,autoPlay:!1,adaptiveHeight:!1,contain:!0,accessibility:!1,prevNextButtons:!1,pageDots:!0}),scroll.update()}function fnCheckoutShippingDetails(e,t){let i=$("#state");i.dropkick({mobile:!0}),$(document).on("click",".submit_btn a",(function(e){e.preventDefault();let t=$("#name").val(),a=$("#address_line_1").val(),n=$("#address_line_2").val(),o=$("#city").val(),s=i.val(),l=$("#zip_code").val(),r=$(".ajax-url").val();const d={action:"save_checkout_shipping_details_action",name:t,addressLine1:a,addressLine2:n,state:s,city:o,zipCode:l};jQuery.post(r,d,(function(e){"redirectUrl"in(e=JSON.parse(e))&&(window.location.href=e.redirectUrl)}))}))}function fnContentFaq(e,t){t=$(t);var i,a=$(".accordion",t);$(".accord_label",a).on("click",(function(){(i=$(this).parent(".accordion")).hasClass("-is-open")?(i.removeClass("-is-open"),$(".accord_inner",i).slideUp("slow").animate({opacity:0},{queue:!1,duration:"slow"})):(i.addClass("-is-open"),$(".accord_inner",i).css("opacity",0).slideDown("slow").animate({opacity:1},{queue:!1,duration:"slow"})),setTimeout((()=>{scroll.update()}),500)}))}function fnCursor(){var e=$(".cursor"),t=$(".text",e),i=$(".inner",e),a=$(".outer",e);if($(window).width()>1024&&e.length>0){$(window).on("mousemove",(function(n){TweenLite.to(e,.3,{opacity:1}),TweenLite.to(t,.3,{x:n.clientX,y:n.clientY}),TweenLite.to(i,.1,{x:n.clientX,y:n.clientY}),TweenLite.to(a,.3,{x:n.clientX,y:n.clientY})})),$('[data-cursor="1"]').hover((function(e){TweenLite.to(i,.55,{opacity:1,scale:8}),TweenLite.to(a,.55,{opacity:0,scale:0})}),(function(e){TweenLite.to(i,.55,{opacity:0,scale:1}),TweenLite.to(a,.55,{opacity:1,scale:1})})),$('[data-cursor="2"]').hover((function(n){t.text($(this).data("cursor-label")),TweenLite.to(t,.3,{color:$(this).data("cursor-color")?$(this).data("cursor-color"):"#1E1E1E",opacity:1,scale:1}),TweenLite.to(i,.3,{opacity:0,scale:0}),TweenLite.to(a,.3,{background:$(this).data("cursor-bg")?$(this).data("cursor-bg"):"#fff",borderColor:$(this).data("cursor-bg")?$(this).data("cursor-bg"):"#fff",left:-52,height:100,top:-52,width:100}),e.addClass("-no-blend")}),(function(n){TweenLite.to(t,.3,{opacity:0,scale:0}),TweenLite.to(i,.3,{opacity:1,scale:1}),TweenLite.to(a,.3,{background:"transparent",borderColor:"#fff",height:60,left:-31,top:-31,width:60}),e.removeClass("-no-blend")})),$('[data-cursor="3"]').hover((function(e){TweenLite.to(i,.3,{opacity:1,scale:1.5}),TweenLite.to(a,.3,{left:-52,opacity:.6,height:100,top:-52,width:100})}),(function(e){TweenLite.to(i,.3,{opacity:0,scale:1}),TweenLite.to(a,.3,{height:60,left:-31,opacity:1,top:-31,width:60})}))}}function fnExperience(e,t){$(document).on("click",".add-to-cart, .btn-save-whiskey",(function(e){e.preventDefault();var t=$(".ajax-url").val(),i={type:"experience"},a={action:"add_to_cart_action",data:JSON.stringify(i)};jQuery.post(t,a,(function(e){var t=JSON.parse(e);t.status&&window.location.replace(t.redirect)}))}))}function fnFooterPrimary(e,t){t=$(t);var i=$('input[type="email"]',t),a=/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i;i.focus((function(){$(this).parent().addClass("-focused")})).blur((function(){var e=$(this).val();""===$(this).val()?i.parent().removeClass("-focused -completed"):($(this).parent().removeClass("-focused"),a.test(e)?$(this).parent().addClass("-completed"):$(this).parent().removeClass("-completed"))}))}function fnGiftUp(e,t){t=$(t);scroll.destroy()}function fnHeaderPrimary(e,t){t=$(t);var i=$("button.menu-btn",t),a=$("aside.side-pane",t),n=$("nav.inline-pane",t),o=$(".pane_notice",t);if(i.on("click",(function(){t.hasClass("-side-pane--open")?(t.removeClass("-side-pane--open"),scroll.start()):(t.addClass("-side-pane--open"),scroll.stop())})),$(".pane_mask",a).on("click",(function(){t.removeClass("-side-pane--open"),scroll.start()})),$(".menu li.is-parent",n).on("mouseenter",(function(){$(this).addClass("is-hover")})).on("mouseleave",(function(){$(this).removeClass("is-hover")})),scroll.on("scroll",(function(e){e.scroll.y>20?t.addClass("-on-scroll"):t.removeClass("-on-scroll")})),$.get("/wp-admin/admin-ajax.php?action=get_count_items_in_cart",(function(e){$("#counterItemsInBasket").html(e)})),o.length>0){var s=1e3*o.data("timestamp");if(s)var l=$(".text_countdown",o),r=setInterval((function(){var e=(new Date).getTime(),t=s-e,i=Math.floor(t/864e5),a=Math.floor(t%864e5/36e5),n=Math.floor(t%36e5/6e4),o=Math.floor(t%6e4/1e3),d=i?i+"d ":null;l.text(d+a+"h "+n+"m "+o+"s "),t<0&&(clearInterval(r),l.text("EXPIRED"))}),1e3)}}function fnHeroShare(e,t){t=$(t);var i=$(".purchase_qty .qty_field",t);i.length>0&&i.each((function(){var e=$(this),t=$("input.quantity_input",e),i=t.val(),a=t.val();$(".quantity_mod",e).on("click",(function(){i=t.val(),a=$(this).hasClass("-increase")?parseFloat(i)+1:i>1?parseFloat(i)-1:1,t.val(a)}))})),$(document).on("click",".buy-share-whiskey",(function(e){e.preventDefault();var t=$(this),i=$(".ajax-url").val(),a={},n=[],o=$(".referrer-email").val(),s=$(".purchase_qty .quantity_input").val();t.prop("disabled",!0),$('input[name="barrels[]"]').each((function(e,t){var i=$(t).attr("placeholder"),a=$(t).val();n.push({value:a,label:i})}));var l,r,d,c,u=$(".barrel-strength").val(),h=$(".label-design").val(),m=$(".is-monogram").val(),f=$(".is-year").val(),p=$(".is-name").val(),v=$(".monogram-label").val(),g=$(".monogram-font-family").val(),b=$(".monogram-single-or-double").val();!m||p||f?m&&p?(l=$(".monogram-text").val(),r=$(".whiskey-name").val()):p&&f&&(r=$(".whiskey-name").val(),d=$(".whiskey-year").val()):l=$(".monogram-text").val(),c=$(".about").val(),a.barrels=n,a.barrelStrength=u+"%",a.labelTypeVal=h,a.isMonogram=m,a.isYear=f,a.isName=p,a.monogramVal=v,a.monogramFontFamily=g,a.monogramSD=b,a.aboutWhiskey=c,a.monogramText=l,a.whiskeyName=r,a.whiskeyYear=d,a.quantity=s,a.referrerEmail=o;var y={action:"add_to_cart_action",data:JSON.stringify(a)};jQuery.post(i,y,(function(e){var t=JSON.parse(e);t.status&&window.location.replace(t.redirect)}))}))}function fnHomeHero(e,t){t=$(t);var i=$(".main_content",t),a=!1,n=$(".main_heading",t),o=$(".bg_image-static",t),s=$(".bg_image-webgl",t),l=$(".bg_video figure",t),r=$("article#age-gate"),d=$("body").attr("data-age-verified"),c=$(".agree-button span",r);function u(){var e=new TimelineMax,i=0;a=!0,$("span.letter",n).each((function(){e.to(this,2,{opacity:1,y:0,ease:Power4.easeInOut},i),i+=.0115})),e.to($(".main_textarea span, .main_content .flower",t),2,{opacity:1,y:0,ease:Power4.easeInOut},i),e.to($(".main:after",t),2,{opacity:1,ease:Power4.easeInOut},i)}function h(){new class{constructor(e){this.scene=new THREE.Scene,this.vertex="varying vec2 vUv;void main() {vUv = uv;gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );}",this.fragment=e.fragment,this.uniforms=e.uniforms,this.renderer=new THREE.WebGLRenderer,this.width=window.innerWidth,this.height=window.innerHeight,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(15658734,1),this.duration=e.duration||1,this.debug=e.debug||!1,this.easing=e.easing||"easeInOut",this.container=document.querySelector("section.home-hero .bg_image-webgl"),this.images=JSON.parse(this.container.getAttribute("data-images")),this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.container.appendChild(this.renderer.domElement),this.camera=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.001,1e3),this.camera.position.set(0,0,2),this.time=0,this.current=0,this.textures=[],this.paused=!0,this.initiate((()=>{this.setupResize(),this.settings(),this.addObjects(),this.resize(),this.autoRun(),this.play()}))}initiate(e){const t=[];let i=this;this.images.forEach(((e,a)=>{matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches&&(e+="&dpr=2");let n=new Promise((t=>{i.textures[a]=(new THREE.TextureLoader).load(e,t)}));t.push(n)})),Promise.all(t).then((()=>{e()}))}autoRun(){setTimeout((()=>{this.next()}),700)}settings(){this.debug&&(this.gui=new dat.GUI),this.settings={progress:.5},Object.keys(this.uniforms).forEach((e=>{this.settings[e]=this.uniforms[e].value,this.debug&&this.gui.add(this.settings,e,this.uniforms[e].min,this.uniforms[e].max,.01)}))}setupResize(){window.addEventListener("resize",this.resize.bind(this))}resize(){let e,t;this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.imageAspect=this.textures[0].image.height/this.textures[0].image.width,this.height/this.width>this.imageAspect?(e=this.width/this.height*this.imageAspect,t=1):(e=1,t=this.height/this.width/this.imageAspect),this.material.uniforms.resolution.value.x=this.width,this.material.uniforms.resolution.value.y=this.height,this.material.uniforms.resolution.value.z=e,this.material.uniforms.resolution.value.w=t;const i=this.camera.position.z;this.camera.fov=180/Math.PI*2*Math.atan(1/(2*i)),this.plane.scale.x=this.camera.aspect,this.plane.scale.y=1,this.camera.updateProjectionMatrix()}addObjects(){this.material=new THREE.ShaderMaterial({extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},side:THREE.DoubleSide,uniforms:{time:{type:"f",value:0},progress:{type:"f",value:0},border:{type:"f",value:0},intensity:{type:"f",value:0},scaleX:{type:"f",value:40},scaleY:{type:"f",value:40},transition:{type:"f",value:40},swipe:{type:"f",value:0},width:{type:"f",value:0},radius:{type:"f",value:0},texture1:{type:"f",value:this.textures[0]},texture2:{type:"f",value:this.textures[1]},displacement:{type:"f",value:(new THREE.TextureLoader).load("/wp-content/themes/designerdram/media/dist/img/disp1.jpg")},resolution:{type:"v4",value:new THREE.Vector4}},vertexShader:this.vertex,fragmentShader:this.fragment}),this.geometry=new THREE.PlaneGeometry(1,1,2,2),this.plane=new THREE.Mesh(this.geometry,this.material),this.scene.add(this.plane)}stop(){this.paused=!0}play(){this.paused=!1,this.render()}next(){if(this.isRunning)return;this.isRunning=!0;let e=this.textures.length,t=this.textures[(this.current+1)%e];this.material.uniforms.texture2.value=t,(new TimelineMax).to(this.material.uniforms.progress,this.duration,{value:1,ease:Power2[this.easing],onComplete:()=>{this.current=(this.current+1)%e,this.material.uniforms.texture1.value=t,this.material.uniforms.progress.value=0,this.isRunning=!1}})}render(){this.paused||(this.time+=.05,this.material.uniforms.time.value=this.time,Object.keys(this.uniforms).forEach((e=>{this.material.uniforms[e].value=this.settings[e]})),requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera))}}({duration:2.8,debug:!1,easing:"easeOut",uniforms:{radius:{value:1,type:"f",min:.1,max:2},width:{value:.25,type:"f",min:0,max:1}},fragment:"\n\t\t\tuniform float time;\n\t\t\tuniform float progress;\n\t\t\tuniform float width;\n\t\t\tuniform float scaleX;\n\t\t\tuniform float scaleY;\n\t\t\tuniform float transition;\n\t\t\tuniform float radius;\n\t\t\tuniform float swipe;\n\t\t\tuniform sampler2D texture1;\n\t\t\tuniform sampler2D texture2;\n\t\t\tuniform sampler2D displacement;\n\t\t\tuniform vec4 resolution;\n\n\t\t\tvarying vec2 vUv;\n\t\t\tvarying vec4 vPosition;\n\n\t\t\tfloat parabola( float x, float k ) {\n\t\t\t  return pow( 4. * x * ( 1. - x ), k );\n\t\t\t}\n\n\t\t\tvoid main() {\n\t\t\t  vec2 newUV = (vUv - vec2(0.5))*resolution.zw + vec2(0.5);\n\t\t\t  vec2 p = newUV;\n\t\t\t  vec2 start = vec2(0.5,0.5);\n\t\t\t  vec2 aspect = resolution.wz;\n\n\t\t\t  vec2 uv = newUV;\n\t\t\t  float dt = parabola(progress, 1.);\n\t\t\t  vec4 noise = texture2D(displacement, fract(vUv+time*0.04));\n\t\t\t  float prog = progress*0.66 + noise.g * 0.04;\n\t\t\t  float circ = 1. - smoothstep(-width, 0.0, radius * distance(start*aspect, uv*aspect) - prog*(1.+width));\n\t\t\t  float intpl = pow(abs(circ), 1.);\n\t\t\t  vec4 t1 = texture2D( texture1, (uv - 0.5) * (1.0 - intpl) + 0.5 ) ;\n\t\t\t  vec4 t2 = texture2D( texture2, (uv - 0.5) * intpl + 0.5 );\n\t\t\t  gl_FragColor = mix( t1, t2, intpl );\n\n\t\t\t}\n\n\t\t  "});if(TweenLite.to([s,o],2,{delay:.6,opacity:1,ease:Power4.easeOut},0),l.length>0){var e=!1,n=!0,r=$("aside.video-mute-btn",t);"true"===l.attr("data-vimeo-muted")&&(e=!0);var d=new Vimeo.Player(l,{background:!0,responsive:!0,loop:!1});d.ready().then((function(){TweenLite.to(l.parent(),2,{delay:1.8,opacity:1,ease:Power4.easeOut},0),TweenLite.to([s,o],2,{delay:1.3,opacity:0,ease:Power4.easeOut},0),scroll.update()})),e||r.on("click",(function(){n?(d.setMuted(!1),n=!1,$(this).removeClass("-muted").addClass("-unmuted")):(d.setMuted(!0),n=!0,$(this).removeClass("-unmuted").addClass("-muted"))})),d.on("timeupdate",(function(e){i.hasClass("-delayed")&&1!=a&&e.seconds>=e.duration-i.data("delay-timing")&&u(),e.seconds>=e.duration-1&&d.pause().then((function(){})).catch((function(e){}))}))}}"true"==d?(i.hasClass("-delayed")||u(),h()):c.on("click",(function(){i.hasClass("-delayed")||u(),h()}))}function fnImgAsideProducts(e,t){t=$(t);$(".carousel",t).flickity({cellAlign:"center",wrapAround:!1,fade:!0,autoPlay:!1,adaptiveHeight:!1,contain:!0,accessibility:!1,prevNextButtons:!1,pageDots:!0}),scroll.update()}function fnLocalStorage(){window.setCookieWithExpiry=function(e,t,i){const a={value:t,expiry:(new Date).getTime()+i};localStorage.setItem(e,JSON.stringify(a))},window.getCookieWithExpiry=function(e){const t=localStorage.getItem(e);if(!t)return null;const i=JSON.parse(t);return(new Date).getTime()>i.expiry?(localStorage.removeItem(e),null):i.value}}function fnMashbill(e,t){t=$(t);const i=$('.modal[data-modal="mashbill_insufficient-barrels"]'),a=$('.modal[data-modal="mashbill_max-barrels"]'),n=$('.modal[data-modal="mashbill_max-wheat-barley-selection"]');$("i.main_exit, .modal_bg",i).on("click",(function(){i.removeClass("-visible")})),$("i.main_exit, .modal_bg",a).on("click",(function(){a.removeClass("-visible")})),$("i.main_exit, .modal_bg",n).on("click",(function(){n.removeClass("-visible")})),$(document).on("click",".submit_mashbill_btn",(function(e){e.preventDefault();let t=0,o=0,s=0;if($(".item_number").each((function(){let e=$(this),i=parseInt(e.val());isNaN(i)||(t+=i,"wheat"===e.attr("id")&&(o+=i),"barley"===e.attr("id")&&(s+=i))})),t<100)return i.addClass("-visible"),!1;if(t>100)return a.addClass("-visible"),!1;if(s>40)return n.addClass("-visible"),!1;const l=$(".ajax-url").val();let r={};r.corn=$("#corn").val(),r.rye=$("#rye").val(),r.wheat=$("#wheat").val(),r.barley=$("#barley").val();const d={action:"mashbill_action",data:JSON.stringify(r)};jQuery.post(l,d,(function(e){e=e.replaceAll("#038;","&"),window.location.replace(e)}))}))}function fnPageFade(){var e=$("body");function t(){window.location=sNewLocation}e.addClass("-loaded"),TweenLite.to($('body[data-age-verified="false"] article#age-gate, .o-scroll'),2,{delay:.6,opacity:1,ease:Power4.easeOut},0),$('a:not([href^="#"]):not([href^="mailto:"]):not([href^="tel:"]):not(.no-transition)').click((function(i){i.preventDefault(),e.removeClass("-loaded").addClass("-leaving"),TweenLite.to($('body[data-age-verified="false"] article#age-gate, .o-scroll'),.7,{delay:0,opacity:0,ease:Power4.easeOut},0),sNewLocation=this.href,setTimeout(t,700)}))}function fnProcessCarousel(e,t){t=$(t);var i=$(".carousel",t),a=$("nav.arrows",t),n=$(".progress-bar",t);i.flickity({cellAlign:"center",wrapAround:!1,fade:!1,autoPlay:!1,adaptiveHeight:!1,contain:!0,accessibility:!1,prevNextButtons:!1,pageDots:!1});var o=i.data("flickity");o.slides.length;scroll.update(),a.find("i.next").on("click",(function(){$(".flickity-viewport",t).addClass("is-pointer-down"),setTimeout((function(){i.flickity("next")}),300),setTimeout((function(){$(".flickity-viewport",t).removeClass("is-pointer-down")}),700)})),a.find("i.prev").on("click",(function(){$(".flickity-viewport",t).addClass("is-pointer-down"),setTimeout((function(){i.flickity("previous")}),300),setTimeout((function(){$(".flickity-viewport",t).removeClass("is-pointer-down")}),700)})),i.on("scroll.flickity",(function(e,t){iCurrentSlide=o.selectedIndex+1,n.find(".current").css("width",100*t+"%")}))}function fnQuiz(e,t){t=$(t);var i,a=$(".form_accord",t),n=$('.modal[data-modal="palate_insufficient-choices"]'),o=$('.modal[data-modal="palate_max-choices"]');$("i.main_exit, .modal_bg",n).on("click",(function(){n.removeClass("-visible")})),$("i.main_exit, .modal_bg",o).on("click",(function(){o.removeClass("-visible")})),$(".accord_label",a).on("click",(function(){(i=$(this).parent(".form_accord")).hasClass("-is-open")?(i.removeClass("-is-open"),$(".accord_inner",i).slideUp("slow").animate({opacity:0},{queue:!1,duration:"slow"})):(i.addClass("-is-open"),$(".accord_inner",i).css("opacity",0).slideDown("slow").animate({opacity:1},{queue:!1,duration:"slow"}),i.siblings(".form_accord.-is-open").removeClass("-is-open").find(".accord_inner").slideUp("slow").animate({opacity:0},{queue:!1,duration:"slow"})),setTimeout((()=>{scroll.update()}),500)})),$(document).on("click",".submit_quiz_btn",(function(e){e.preventDefault();var t=[],i=$(".ajax-url").val();if($(".field_option").each((function(e,i){$(i).find(".option_input").is(":checked")&&t.push($(i).find(".option_input").val())})),t.length<3)return n.addClass("-visible"),!1;if(t.length>6)return o.addClass("-visible"),!1;var a=barleyRye=wheatedBourbon=ryeBourbon=pureRye=0;$(".field_option").each((function(e,t){$(t).find(".option_input").is(":checked")&&(a+=$(t).find(".option_input").data("pure-bourbon"),barleyRye+=$(t).find(".option_input").data("barley-rye"),wheatedBourbon+=$(t).find(".option_input").data("wheated-bourbon"),ryeBourbon+=$(t).find(".option_input").data("rye-bourbon"),pureRye+=$(t).find(".option_input").data("pure-rye"))})),dataValues={},dataValues.pureBourbon=a,dataValues.barleyRye=barleyRye,dataValues.wheatedBourbon=wheatedBourbon,dataValues.ryeBourbon=ryeBourbon,dataValues.pureRye=pureRye;var s={action:"palate_test_action",data:JSON.stringify(dataValues)};jQuery.post(i,s,(function(e){e=e.replaceAll("#038;","&"),window.location.replace(e)}))}))}function fnWhiskeyBuilder(e,t){t=$(t);var i=parseInt(t.attr("data-active-page")),a=$("nav.prev-page",t),n=$("nav.steps-menu",t),o=$("figure.bottle-preview",t),s=$(".builder_form",t),l=($("aside.preview",t),$("main.main",t)),r=$(".main_vertical-label",t),d=($(".next-page",t),$(".form-page",t),$(".guide-slidein",t)),c=$(".review-page",t),u=parseInt($("li:last-of-type .item_link",n).attr("data-page-link")),h=$('.modal[data-modal="mmw_field-guide"]'),m=$('.modal[data-modal="mmw_welcome"]'),f=$('.modal[data-modal="mmw_back"]'),p=$('.modal[data-modal="mmw_flavour-insufficient"]'),v=$('.modal[data-modal="mmw_flavour-max"]'),g=$('.modal[data-modal="mmw_required-fields"]');function b(){if($(window).width()<768){var e=$(window).height();d.attr("style","top: "+e+"px !important")}}function y(){n.find('.item_link[data-page-link="'+i+'"]').parent("li.menu_item").addClass("-active").siblings("li.menu_item").removeClass("-active")}function w(e=!1){c.is(":visible")&&c.fadeOut();var n=$('.form-page[data-page="'+i+'"]',t),r=$('.form-page:not([data-page="'+i+'"])',t);if(i!==u){function h(){setTimeout((()=>{TweenLite.to(s,2,{y:"0",ease:Power4.easeInOut}),s.fadeIn(),c.fadeOut(),r.removeClass("-active"),n.addClass("-active"),o.removeClass("-review"),$(".bottle-filling").removeClass("-review"),t.height("auto"),l.height(n.outerHeight()),1===i?(a.removeClass("-visible"),d.addClass("-visible")):(a.addClass("-visible"),d.removeClass("-visible")),scroll.update(),$("header.primary nav.inline-pane").removeClass("-progressing")}),600)}!1,e||$("header.primary nav.inline-pane").addClass("-progressing"),scroll.scrollTo("top",{offset:0,callback:h(),duration:600,easing:[.25,0,.35,1],disableLerp:!0})}else{function h(){setTimeout((()=>{TweenLite.to(s,2,{y:"0",ease:Power4.easeInOut}),s.fadeOut(),c.fadeIn(),r.removeClass("-active"),n.removeClass("-active"),t.height(c.outerHeight()),l.height("auto"),scroll.update(),$("header.primary nav.inline-pane").removeClass("-progressing")}),600)}!0,d.removeClass("-visible"),scroll.scrollTo("top",{offset:0,callback:h(),duration:600,easing:[.25,0,.35,1],disableLerp:!0})}}oModalSaveWhiskey=$('.modal[data-modal="mmw_save-whiskey"]'),$("i.main_exit, .modal_bg",m).on("click",(function(){m.removeClass("-visible")})),$("i.main_exit, .modal_bg",f).on("click",(function(){f.removeClass("-visible")})),$("i.main_exit, .modal_bg",v).on("click",(function(){v.removeClass("-visible")})),$("i.main_exit, .modal_bg",p).on("click",(function(){p.removeClass("-visible")})),$("i.main_exit, .modal_bg",g).on("click",(function(){g.removeClass("-visible")})),$("i.main_exit, .modal_bg",oModalSaveWhiskey).on("click",(function(){oModalSaveWhiskey.removeClass("-visible")})),getCookieWithExpiry("WELCOME-POPUP-SHOWN")||(m.addClass("-visible"),setCookieWithExpiry("WELCOME-POPUP-SHOWN",!0,12096e5)),$(window).on("load",b),$(window).on("resize",b),b(),history.pushState(null,null,document.URL),$(window).on("popstate",(function(e){f.addClass("-visible")})),a.on("click",(function(){i>1?(i=parseInt(i-1),t.attr("data-active-page",i),w(),y()):window.history.back()})),w(!0),$("[data-page-link]:not(.-disable)").on("click",(function(e){if(e.preventDefault(),2===(i=parseInt($(this).data("page-link")))&&O()<100)return p.addClass("-visible"),!1;if(4===i){var a=$('.thumb-select input:radio[name="labelType"]:checked'),n=a.data("monograms"),o=a.data("name"),s=a.data("year");if(n)if(""==$("#monogramText").val())return g.addClass("-visible"),!1;if(o)if(""==$("#whiskeyName").val())return g.addClass("-visible"),!1;if(s)if(""==$("#whiskeyYear").val())return g.addClass("-visible"),!1}t.attr("data-active-page",i),y(),w(),r.fadeOut(600,(function(){$(this).find("span").text($('.form-page[data-page="'+i+'"]',t).attr("data-vert-label")),$(this).fadeIn(600)})),1===i&&($(".preview-bottle-container .bottle-figure .bottle-filling-img.active").show(),$(".preview-bottle-container .bottle-figure").find(".rendered-bottle").hide(),$(".preview-bottle-container").find(".alc-text").hide(),$(".bottle-filling-monogram").hide(),$(".bottle-filling-name").hide(),$(".bottle-filling-name-year").hide(),$(".bottle-filling-year").hide(),$(".bottle-filling-description").hide()),2===i&&($(".preview-bottle-container .bottle-figure .bottle-filling-img.active").hide(),$(".preview-bottle-container").find(".alc-text").hide(),$(".preview-bottle-container .bottle-figure").find(".rendered-bottle").remove(),setTimeout((function(){$(".preview-bottle-container .bottle-figure").append('<div class="bottle-preview rendered-bottle" data-scroll data-scroll-sticky data-scroll-target="#begin">')}),800),$(".bottle-filling-name").hide(),$(".bottle-filling-monogram").hide(),$(".bottle-filling-name-year").hide(),$(".bottle-filling-year").hide(),$(".bottle-filling-description").hide()),3===i&&($(".preview-bottle-container .bottle-figure .bottle-filling-img.active").hide(),setTimeout((function(){var e=$('.barrel-strength input:radio[name="barrelStrength"]:checked').val();$(".preview-bottle-container").find(".alc-text").show("slow").find("span").text(e),0==$(".preview-bottle-container .bottle-figure .rendered-bottle").length?$(".preview-bottle-container .bottle-figure").append('<div class="bottle-preview rendered-bottle" data-scroll data-scroll-sticky data-scroll-target="#begin">'):$(".preview-bottle-container .bottle-figure").find(".rendered-bottle").show(),$(".preview-bottle-container .bottle-figure").find(".rendered-bottle").addClass("rendered-bottle-design");var t=$('.thumb-select input:radio[name="labelType"]:checked'),i=t.data("monograms"),a=t.data("name"),n=t.data("year"),o=$('.thumb-select input:radio[name="labelMonogram"]:checked'),s=o.data("font-family");"single"==o.data("single-double")?($(".monogram-text-limit").text("(Max. 1 character)"),$("#monogramText").attr({maxlength:1,max:1})):($(".monogram-text-limit").text("(Max. 2 characters)"),$("#monogramText").attr({maxlength:2,max:2})),!i||a||n?i&&a?($(".monograms").show(),$(".bottle-filling-monogram").css("display","flex").addClass("font-"+s),$(".whiskey-about-input").show(),$(".monogram-text-input").show(),$(".whiskey-name-input").show(),$(".bottle-filling-name-year").show(),$(".bottle-filling-name").hide(),$(".bottle-filling-year").hide(),$(".whiskey-year").hide()):a&&n&&($(".whiskey-about-input").show(),$(".whiskey-name-input").show(),$(".bottle-filling-year").show(),$(".whiskey-year").show(),$(".bottle-filling-name").show(),$(".monograms").hide(),$(".monogram-text-input").hide(),$(".bottle-filling-monogram").hide(),$(".bottle-filling-name-year").hide()):($(".monograms").show(),$(".bottle-filling-monogram").css("display","flex").addClass("font-"+s),$(".whiskey-about-input").show(),$(".monogram-text-input").show(),$(".bottle-filling-name").hide(),$(".bottle-filling-name-year").hide(),$(".bottle-filling-year").hide(),$(".whiskey-name-input").hide(),$(".whiskey-year").hide()),$(".bottle-filling-description").show()}),800))})),$("fieldset.fields .field.-verify",t).on("input",(function(){$(this).find("input").val().length>($(this).data("min-verify")?$(this).data("min-verify"):0)?$(this).addClass("-verified"):$(this).removeClass("-verified")}));var k=$("fieldset.range",t);k.length>0&&k.each((function(){var e=$(this),t=$('input[type="range"]',e),i=$("i.label_guide",e),a=$(".field_count .count_value",e),n=t.val(),o=t.val();t.on("input",(function(e){if(!E(e))return v.addClass("-visible"),!1;a.val(t.val()),S()})),$(".input_mod",e).on("click",(function(e){if(n=t.val(),$(this).hasClass("-increase")?n<100?(o=parseFloat(n)+5)>100&&(o=100):o=100:n>0?(o=parseFloat(n)-5)<0&&(o=0):o=0,t.val(o),a.val(o),!E(e))return v.addClass("-visible"),!1;S()})),i.length>0&&(i.on("click",(function(){$(".main_heading",h).html($(".guide_content_title",e).html()),$(".main_description",h).html($(".guide_content_description",e).html()),h.addClass("-visible")})),$("i.main_exit, .modal_bg",h).on("click",(function(){h.removeClass("-visible")})))}));var x=$("fieldset.barrel-strength, fieldset.thumb-select",t);if(x.length>0&&x.each((function(){var e=$(this);$("label",e).click((function(){$(this).find("input").is(":checked")&&$(this).addClass("-checked").siblings("label").removeClass("-checked")}))})),defaultStrength=$('.barrel-strength input:radio[name="barrelStrength"]:checked').val(),defaultStrength){var C=defaultStrength.replace("%","");strengthOpacity=C/100,$(".bottle-filling-value").css({"background-color":"rgb(208 120 25)",opacity:strengthOpacity})}$(document).on("change",'.barrel-strength input:radio[name="barrelStrength"]',(function(){if($(this).is(":checked")){var e=$(this).val().replace("%","");$(".preview-bottle-container").find(".alc-text span").text($(this).val()),strengthOpacity=e/100,$(".bottle-filling-value").css({"background-color":"rgb(208 120 25)",opacity:strengthOpacity})}})),$(document).on("change",'.thumb-select input:radio[name="labelType"]',(function(){var e=$(this).data("monograms"),t=$(this).data("name"),i=$(this).data("year");!e||t||i?e&&t?($(".monograms").show(),$(".bottle-filling-monogram").css("display","flex"),$(".whiskey-about-input").show(),$(".monogram-text-input").show(),$(".whiskey-name-input").show(),$(".bottle-filling-name-year").show(),$(".bottle-filling-name").hide(),$(".bottle-filling-year").hide(),$(".whiskey-year").hide()):t&&i&&($(".whiskey-about-input").show(),$(".whiskey-name-input").show(),$(".bottle-filling-year").show(),$(".whiskey-year").show(),$(".bottle-filling-name").show(),$(".monograms").hide(),$(".monogram-text-input").hide(),$(".bottle-filling-monogram").hide(),$(".bottle-filling-name-year").hide()):($(".monograms").show(),$(".bottle-filling-monogram").css("display","flex"),$(".whiskey-about-input").show(),$(".monogram-text-input").show(),$(".bottle-filling-name").hide(),$(".bottle-filling-name-year").hide(),$(".bottle-filling-year").hide(),$(".whiskey-name-input").hide(),$(".whiskey-year").hide())})),$(document).on("change",'.thumb-select input:radio[name="labelMonogram"]',(function(){var e=$('.thumb-select input:radio[name="labelMonogram"]:checked'),t=e.data("font-family"),i=e.data("single-double");if("double"==i)$(".monogram-text-limit").text("(Max. 2 characters)"),$("#monogramText").attr({maxlength:2,max:2});else{$(".monogram-text-limit").text("(Max. 1 character)"),$("#monogramText").attr({maxlength:1,max:1});var a=$("#monogramText").val();$("#monogramText").val(a[0])}$(".bottle-filling-monogram").removeClass((function(e,t){return(t.match(/(^|\s)font\S+/g)||[]).join(" ")})).addClass("font-"+t);var n=$("#monogramText").val();if(2==n.length&&"double"==i){$(".bottle-filling-monogram").html("<span>"+n[0]+'</span> <span class="separator-1"></span> <span>'+n[1]+"</span>")}else $(".bottle-filling-monogram").html("<span>"+n+"</span>")})),$("fieldset.thumb-select .-carousel",t).flickity({cellAlign:"left",wrapAround:!1,fade:!1,autoPlay:!1,adaptiveHeight:!1,groupCells:4,contain:!1,accessibility:!1,prevNextButtons:!0,pageDots:!0,arrowShape:{x0:20,x1:65,y1:40,x2:70,y2:35,x3:30}}),$(".slidein_exit",d).on("click",(function(){d.removeClass("-visible"),d.addClass("-dismissed")})),$(document).on("blur",".count_value",(function(){var e=$(this).text(),t=5*Math.ceil(e/5);$(this).text(t),$(this).parent().prev().find(".input_range").val(t)}));var _=100,T=[].slice.call(document.getElementsByClassName("input_range")),O=function(){var e=0;return T.forEach((function(t){e+=parseInt(t.value,10)})),e},E=function(e){var t,i=O();return!(i>_)||("input_range"==(t=e.target).className?(t.value=t.value-(i-_),countValue=t.parentNode.nextSibling.nextSibling.querySelector(".count_value"),countValue.value=t.value):"count_value"==t.className?(inputRange=t.parentNode.previousSibling.previousSibling.querySelector(".input_range"),countValue=t,countValue.value=inputRange.value-(i-_),inputRange.value=inputRange.value-(i-_)):(inputRange=t.parentNode.querySelector(".input_range"),countValue=t.parentNode.nextSibling.nextSibling.querySelector(".count_value"),countValue.value=inputRange.value-(i-_),inputRange.value=inputRange.value-(i-_)),e.preventDefault(),S(),!1)};function S(){var e=O();$(".bottle-filling-img").removeClass("active"),$(".bottle-filling-img-"+e).addClass("active")}T.forEach((function(e){e.addEventListener("input",E)})),$(document).on("blur","input.count_value",(function(e){var t=parseInt($(this).attr("max")),i=parseInt($(this).attr("min"));$(this).val()>t?$(this).val(t):$(this).val()<i&&$(this).val(i);var a=5*Math.round($(this).val()/5);if($(this).val(a),$(this).parent().prev().find(".input_range").val($(this).val()),!E(e))return v.addClass("-visible"),!1;S()})),$(document).on("input","#monogramText",(function(){var e=$(this).val(),t=$('.thumb-select input:radio[name="labelMonogram"]:checked'),i=(t.data("font-family"),t.data("single-double"));if($(".bottle-filling-monogram").text(e),2==e.length&&"double"==i){$(".bottle-filling-monogram").html("<span>"+e[0]+'</span> <span class="separator-1"></span> <span>'+e[1]+"</span>")}else $(".bottle-filling-monogram").html("<span>"+e+"</span>")})),$(document).on("input","#whiskeyName",(function(){var e=$(this).val();$(".bottle-filling-name-year").text(e),$(".bottle-filling-name").text(e)})),$(document).on("input","#whiskeyYear",(function(){var e=$(this).val();$(".bottle-filling-year").text(e)})),$(document).on("input","#aboutWhiskey",(function(){var e=$(this).val();$(".bottle-filling-description").show().text(e)})),$(document).on("click",".add-to-cart, .btn-save-whiskey",(function(e){e.preventDefault();var t=$(this),i=$(".ajax-url").val(),a={},n=[],o=t.attr("class");$(".referrer-email")>0?referrerEmail=$(".referrer-email").val():referrerEmail=function(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var a=t[i].split("=");if(a[0]==e)return a[1]}}("referrer"),t.prop("disabled",!0),"btn btn-save-whiskey"==o&&oModalSaveWhiskey.addClass("-visible"),k.each((function(){var e=$(this),t=parseInt($('input[type="range"]',e).val()),i=$.trim($(".field_label label.label_text",e).text());i="'"+i+"'",0!==t&&n.push({value:t,label:i})}));var s,l,r,d,c=$('.barrel-strength input:radio[name="barrelStrength"]:checked').val(),u=$('.thumb-select input:radio[name="labelType"]:checked'),h=u.val(),m=u.data("monograms"),f=u.data("year"),p=u.data("name"),v=$('.thumb-select input:radio[name="labelMonogram"]:checked'),g=v.val(),b=v.data("font-family"),y=v.data("single-double");!m||p||f?m&&p?(s=$("#monogramText").val(),l=$("#whiskeyName").val()):p&&f&&(l=$("#whiskeyName").val(),r=$("#whiskeyYear").val()):s=$("#monogramText").val(),d=$("#aboutWhiskey").val(),a.productID=$("body").attr("data-product_id"),a.barrels=n,a.barrelStrength=c,a.labelTypeVal=h,a.isMonogram=m,a.isYear=f,a.isName=p,a.monogramVal=g,a.monogramFontFamily=b,a.monogramSD=y,a.aboutWhiskey=d,a.monogramText=s,a.whiskeyName=l,a.whiskeyYear=r,a.quantity=1,referrerEmail&&(a.referrerEmail=referrerEmail);var w={action:"add_to_cart_action",data:JSON.stringify(a)};jQuery.post(i,w,(function(e){if("btn btn-save-whiskey"==o)location.reload();else{var t=JSON.parse(e);t.status&&window.location.replace(t.redirect)}}))})),$(document).on("click",".create-another-whiskey",(function(e){e.preventDefault(),oModalSaveWhiskey.addClass("-visible")})),$(document).on("click",".btn-no-saving",(function(e){e.preventDefault(),oModalSaveWhiskey.removeClass("-visible")})),S()}scroll.on("scroll",(e=>{document.documentElement.setAttribute("data-direction",e.direction)})),function(e){"use strict";document.documentElement.classList.add("-loaded"),document.documentElement.classList.remove("-loading"),setTimeout((()=>{document.documentElement.classList.add("-ready")}),300),setTimeout((()=>{fnCursor(),fnLocalStorage(),e("section.home-hero").each(fnHomeHero),e("header.primary").each(fnHeaderPrimary),e("section.process-carousel").each(fnProcessCarousel),e("section.img-aside-products").each(fnImgAsideProducts),e("section.bordered-testimonials").each(fnBorderedTestimonials),e("footer.primary").each(fnFooterPrimary),e("section.whiskey-builder").each(fnWhiskeyBuilder),e("section.quiz").each(fnQuiz),e("section.mmw-mashbill").each(fnMashbill),e("section.basket").each(fnBasket),e("section.hero-share").each(fnHeroShare),e("section.checkout-shipping-details").each(fnCheckoutShippingDetails),e("section.content-faq").each(fnContentFaq),e("section.giftup").each(fnGiftUp),e("section.experience").each(fnExperience),e("nav.blog-categories").each(fnBlogMobileMenu)}),1e3)}(jQuery);
//# sourceMappingURL=../maps/global.min.js.map
